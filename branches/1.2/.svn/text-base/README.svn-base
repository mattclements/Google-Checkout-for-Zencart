GOOGLE CHECKOUT PLUGIN FOR ZEN CART v1.2 RC4 rev1 - 03/06/2007

INTRODUCTION
============
The Google Checkout module for Zen Cart adds Google Checkout as a Checkout 
 Module within Zen Cart.
This will allow merchants using Zen Cart to offer Google Checkout as an 
 alternate checkout method.
The plugin provides Level 2 integration of Google Checkout with Zen Cart.

Plugin features include:
1. Posting shopping carts to Google Checkout
2. Shipping support, now you can use Merchant Calculated Shipping Rates!
3. Tax support
4. User and order updates within Zen Cart
5. Order processing using Zen Cart Admin UI 


REQUIREMENTS
============
Zen Cart v1.3.7
PHP3 or PHP4 or PHP5 with cURL(libcurl) installed and enabled


INSTALLATION NOTES
==================
1. Follow instructions contained in the INSTALLATION file.
2. Verify the installation from the Admin site and selecting MODULES->PAYMENTS 
    and checking if Google Checkout is listed as a payment option.
3. Set the file attribute to 777 for /googlecheckout/response_error.log and 
    /googlecheckout/response_message.log files.
4. Go to http://<url-site-url>/googlecheckout/responsehandler.php
    If you get a blank page, go to the next section.  If you get any errors, 
    you much correct all errors before proceeding.  Refer to the trouble 
    shooting section below or go to the support forum for help.


SETUP ON ADMIN UI
=================
Select and install the Google Checkout payment module. The following are some 
of the fields you can update:

1. Enable/Disable: Enable this to use Google Checkout for your site.
2. .htaccess Basic Authentication Mode with PHP over CGI? If your site is 
   installed on a PHP CGI you must disable Basic Authentication over PHP. 
   To avoid spoofed messages reaching responsehandler.php, set the .htaccess file 
   with the script linked (http://your-site/admin/includes/htaccess.php). 
   Set permission 777 for http://your-site/googlecheckout/ before running 
   the script. Remember to turn back permissions after creating the files.
3. Merchant ID and Merchant Key:(Mandatory) If any of these are not set and the 
   module is enabled, a disabled (gray) Checkout button appears on the Checkout 
   page. Set these values from your seller Google account under the 
   Settings->Integration tab.
4. Operation Mode: Test your site with Google Checkout's sandbox server before 
   migrating to production. You will need it signup for a separate Google Checkout 
   sandbox account at http://sandbox.google.com/sell. Your sandbox account will 
   have a different Merchant ID and Merchant Key. When you are ready to run 
   against the production server, remember to update your merchant ID and key 
   when migrating.
5. Merchant Calculation Mode of Operation: Sets Merchant calculation URL for 
   Sandbox environment. Could be HTTP or HTTPS. (Checkout production environment 
   always requires HTTPS.)
6. MultiSocket Shipping Quotes Retrieval: This configuration will enable a 
   multisocket feature to parallelize Shipping Providers quotes. This should 
   reduce the time this call take and avoid GC Merchant Calculation TimeOut. Is 
   still in development status, this feature could use many hardware resources,
   because uses many HTTP connections to split Shipping Providers Web Services 
   calls. Is recommended to test the integration with the 
   responsehandler_test.php file.
   http://google-checkout-zencart.googlecode.com/files/responsehandler_test.php
   More Info http://your-site/admin/includes/multisock.html

7. Default Values for Real Time Shipping Rates: Set your default values for 
   all merchant calculated shipping rates. This values will be used if for any 
   reason Google Checkout cannot reach your API callback to calculate the 
   shipping price.

8. Google Analytics Id: Add google analytics to your e-commerce. Now there is a 
   feature in GA to integrate easily with any e-commerce with GoogleCheckout.
   More info: See below "Enabling E-Commerce Reporting for Google Analytics".

Your Google Checkout setup page is correct if, upon viewing it, a non-disabled 
Google Checkout button appears.

Enabling E-Commerce Reporting for Google Analytics
==================================================
To track Google Checkout orders, you must enable e-commerce reporting for your 
website in your Google Analytics account. The following steps explain how you 
enable e-commerce reporting for your website:

   1. Log in to your Google Analytics account.
   2. Click the Edit link next to the profile you want to enable. This link 
      appears in the Settings column.
   3. On the Profile Settings page, click the Edit link in the Main Website 
      Profile Information box.
   4. Change the selected E-Commerce Website radio button from No to Yes.
More info: 
http://code.google.com/apis/checkout/developer/checkout_analytics_integration.html


MERCHANT CALCULATED SHIPPING
============================
In order to use this module you must have some Real Time Shipping provider,
 such as USPS or FedEx. This Module must be activated and configured in
 Modules->Shipping. For each enabled module you'll have to set the default
 values in the Google Checkout Admin UI.
This Value will be used if for any reason Google Checkout cannot reach your
 API callback to calculate the shipping price. 

The available shipping methods for each shipping provider must be configured
 in includes/modules/payment/googlecheckout.php in the mc_shipping_methods
 parameter. If you want to disable one or more methods, just comment them out.
Be aware that if you mix flat rate and real time rates, both will be taken
 as merchant-calculated-shipping. 

COUPONS
=======
You can now use coupons with this module. Just add coupons in the Admin UI,
 and the user can add them in his order. This is restinged to just one
 coupon per order as Zen cart standards, aldo GC supports many.


TRACKING USERS AND ORDERS
=========================
In order to provide this support (as required for Level 2 integration), update
 the API callback request field in the seller account to 
 https://<url-site-url>/admin/googlecheckout/responsehandler.php . 
 Note that the production Checkout server requires an SSL callback site.
The Sandbox server accepts non SSL callback URLs.

View your Google Checkout customers and their orders in the Reports tab. 
For each order, the default starting state is PENDING. 
The state changes to PROCESSING and DELIVERED as follows; corresponding
 messages will be sent out to the Checkout server for order processing.

| Original State | New State  | Action                         |  Customer Notification    |
| PENDING        | PROCESSING | charging the order             |  Processing order message |
| PROCESSING     | DELIVERED  | marking the order for delivery |  Shipped order message    |

Any comments added during state change will be sent to the buyer account page
 if you have selected the Append Comments option.

All statechanges are added as notes in the Admin UI
All request and response messages will be logged to the file
 admin/googlecheckout/response_message.log.

In case an order payment is declined or an order is cancelled(by Google or
 otherwise), you can add code to admin/googlecheckout/responsehandler.php for 
 any specific actions you need to take.
 

PROJECT HOME
============
To check out the latest release or to report issues, go to
 http://code.google.com/p/google-checkout-zencart


GROUP DISCUSSIONS
=================
To meet other developers and merchants who have integrated Google Checkout
 with Zen Cart and to discuss any topics related to integration of Google 
 Checkout with Zen Cart, go to http://www.zen-cart.com/forum/showthread.php?t=47318

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
MOST COMMON MISTAKES
====================
1. Make sure you set the file attribute to 777 for 
    /googlecheckout/response_error.log and /googlecheckout/response_message.log files.
2. Set your Google callback url to https://<url-site-url>/googlecheckout/responsehandler.php
	In Sandbox, SSL is not required.
	In Live mode, SSL is required.
3. Go to https://<url-site-url>/googlecheckout/responsehandler.php
	
TROUBLE SHOOTING
================
1. Problem: Fatal error: Call to undefined function: getallheaders() error.
	Solution: You webhosting company does not have the function getallheaders()
	 enable on your webserver. See above for fix.
2. Problem: /public_html/googlecheckout/response_message.log) [function.fopen]:
    failed to open stream: Permission denied.
	Solution: Set the file attribute to 777 for /googlecheckout/response_error.log
	 and /googlecheckout/response_message.log files.
3. Problem: Test order shows up in Google but not admin.
	Solution: There is an error somewhere in the file /googlecheckout/responsehandler.php
4. Problem: <error-message>Malformed URL component: 
   expected id: (\d{10})|(\d{15}), but got 8***********4 </error-message>
	Solution: You have an extra space after your Google merchant id. Go to
	 Admin->payment.  Edit Googlecheckout module.  Extra space will disappear.
	 Click update button.
5. Problem: <error-message>No seller found with id 7************8</error-message>
	Solution: Wrong merchant id.  Sandbox merchant id can only be use with sandbox
	 accounts.  Sandbox and Live mode use different merchant id. 
6. Problem: sun.security.validator.ValidatorException: PKIX path building
    failed: sun.security.provider.certpath.SunCertPathBuilderE xception: unable
    to find valid certification path to requested target
	Solution: Your SSL certificate is not accepted by Google Checkout.
7. Problem: <error-message>Bad Signature on Cart</error-message>
	Solution: Incorrect Merchant key.
8. Problem: (/public_html/googlecheckout/response_error.log) 
    Tue Nov 28 8:56:21 PST 2006:- Shopping cart not obtained from session. 
   Solution: Set to False admin->configuration->session->Prevent Spider
    Sessions configuration (Thx dawnmariegifts, beta tester)
   Side effects: You'll see spiders as active users.
   Solution 2 (Recommended): Remove any string like 'jakarta' in the includes/spider.txt
		
KNOWN BUGS - (Report bugs at http://www.zen-cart.com/forum/showthread.php?t=47318)
==========


CHANGE LOG
==========
09/26/2006 v1.0  (Google Checkout team)
	- Initial release. 
	
09/27/2006 v1.0  (Google Checkout team)
	- Updated the original module to run on either PHP4 or PHP5. 
	
09/28/2006 v1.0a (DrByte)
	- Code separated into components following Zen Cart standards.
	- Zipped for easier implementation.
	- Readme updated. 
		   
10/05/2006 v1.0.1 (Google Checkout team)
	- Step-by-step installation instructions included.   
	
10/14/2006 v1.0.2 (colosports)
	- Fixed languages_id bug.
	- Added return links from Google Checkout Cart.
	- Added customers ip-address & phone number.
	- Added getallheaders() funtion.
	- Fixed zone id bug.
	- Fix address book bug.
	- Added Google link and Order No: to Admin page.
	- Fixed quantity bug.
	- Fixed product attribute bug.
	- Added product attribute in Google Checkout cart. 
	- Updated README file. 

10/14/2006 v1.0.2c (colosports)
	- Fixed change order status on Admin.
	- Change time to reflect time zone on Admin. 
	- Separated full name to first and last name.
	- Updated README file. 	

10/19/2006 v1.0.3 (Google Checkout team)
	- Fixed Notify Customer checkbox bug

11/16/2006 v1.0.4 (colosports)
	- Fixed order status bug.
	- Updated README file and INSTALLATION file. 	
11/28/2006 v1.0.5 (ropu)
   - Add support for Merchant Calculated Shipping Rates.
   - Fixed minor bugs in responsehandler.php and orders.php files
   - Change the XML parser and builder
   - Removed getallheader() function
   - Fixed wrong Qty in Admin UI
   - Fixed modules not saving their settings
   - Fixed Notify Customer option
   - Add state change, Risk and charge notification into the Admin UI
   - Add support for coupons
   - Fix Shopping cart not obtained from session. See TROUBLE SHOOTING.	
01/12/2007 v1.0.5b1 (ropu)
   - Fix <tax-table-selector> strict validation.   

02/26/2007 v1.2 (ropu)
   - Tested on Zencart v1.3.7
   - Add multisocket feature for merchant-calculations (alfa)(optional)
   - Different algorithm to retrieve quotes
   - Add Google Analytics Support
   - Add support for PHP CGI installations
   - Add user and password for Google Checkout buyers
   - Items retrieved from Merchant-private-item-data instead of session.
   - Many bug fixes
   
03/05/2007 v1.2 RC4 (ropu)
   - Fix gray button when Tax Class selected bug (Thx BlessIsaacola)

   