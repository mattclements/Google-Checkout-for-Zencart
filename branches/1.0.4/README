GOOGLE CHECKOUT PLUGIN FOR ZEN CART v1.0.4 - 11/16/2006

INTRODUCTION
============
The Google Checkout module for Zen Cart adds Google Checkout as a Checkout Module within Zen Cart.
This will allow merchants using Zen Cart to offer Google Checkout as an alternate checkout method.
The plugin provides Level 2 integration of Google Checkout with Zen Cart.

Plugin features include:
1. Posting shopping carts to Google Checkout
2. Shipping support (Currently, flat rates, item rates and table rates are supported)
3. Tax support
4. User and order updates within Zen Cart
5. Order processing using Zen Cart Admin UI 


REQUIREMENTS
============
Zen Cart v1.3.5 or later (released 04-Sept-2006)
PHP3 or PHP4 or PHP5 with cURL(libcurl) installed and enabled


INSTALLATION NOTES
==================
1. Follow instructions contained in the INSTALLATION file.
2. Verify the installation from the Admin site and selecting MODULES->PAYMENTS and checking if Google Checkout is listed as a payment option.
3. Set the file attribute to 777 for /googlecheckout/response_error.log and /googlecheckout/response_message.log files.
4. Go to http://<url-site-url>/googlecheckout/responsehandler.php    If you get a blank page, go to the next section.  If you get any errors, you much correct all errors before proceeding.  Refer to the trouble shooting section below or go to the support forum for help.


SETUP ON ADMIN UI
=================
Select and install the Google Checkout payment module. The following are some of the fields you can update:

1. Enable/Disable: Enable this to use Google Checkout for your site.
2. Merchant ID and Merchant Key:(Mandatory) If any of these are not set and the module is enabled, a disabled (gray) Checkout button appears on the Checkout page. 
   Set these values from your seller Google account under the Settings->Integration tab.
3. Operation Mode (Sandbox and Checkout): 
  3a. Sandbox mode: Test your site with Google Checkout's sandbox server before migrating to production. You will need it signup for a separate Google Checkout sandbox account at http://sandbox.google.com/sell. Your sandbox account will have a different Merchant ID and Merchant Key. 
  3b. Live mode: You will need it signup for a Google Checkout live account at http://checkout.google.com/sell. Your live checkout account will have a different Merchant ID and Merchant Key than your sandbox account. When you are ready to run against the production server, update your merchant ID and key when migrating. 
4. Shipping Options: Select the shipping options to be supported.
   If the shipping tax rates differ, a disabled Checkout button will appear on the Checkout page.

Your Google Checkout setup page is correct if, upon viewing it, a non-disabled Google Checkout button appears.

SETUP ON GOOGLE ACCOUNT
========================
In order to provide this support (as required for Level 2 integration), Go to:
https://checkout.google.com/sell/settings?section=Integration 
OR
https://sandbox.google.com/sell/settings?section=Integration
Update the API callback request field in the seller account to https://<url-site-url>/googlecheckout/responsehandler.php . 
Note that the production Checkout server requires an SSL callback site.
The Sandbox server accepts non SSL callback URLs.


TRACKING USERS AND ORDERS
=========================

View your Google Checkout customers and their orders in the Reports tab. 
(From Google Checkout website)
For each order, the default starting state is PENDING. 
Changing the status  on Google Checkout  will also change the order status on Admin.  
Example: If you mark the charge the order on Google Checkout, Google will send the action to Admin and change the order status to Processing.
You can add code to googlecheckout/responsehandler.php to customize or add more actions.

(From Admin/orders.php)
The state changes to PROCESSING and DELIVERED as follows; corresponding messages will be sent out to the Checkout server for order processing.
| Original State -> New State  | Action                         |  Customer Notification    |
| PENDING        -> PROCESSING | Charging the order             |  Processing order message |
| PROCESSING     -> DELIVERED  | Mark as ship and Archive order |  Shipped order message    |
All request and response messages will be logged to the file googlecheckout/response_message.log.
In case an order payment is declined or an order is cancelled(by Google or otherwise), you can add code to googlecheckout/responsehandler.php for any specific actions you need to take.

PROJECT HOME
============
To check out the latest release or to report issues, go to http://code.google.com/p/google-checkout-zencart


GROUP DISCUSSIONS AND SUPPORT FORUM
===================================
To meet other developers and merchants who have integrated Google Checkout with Zen Cart and to discuss any topics related to integration of Google Checkout with Zen Cart, go to http://www.zen-cart.com/forum/showthread.php?t=47318

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
MOST COMMON MISTAKES
====================
1. Make sure you set the file attribute to 777 for /googlecheckout/response_error.log and /googlecheckout/response_message.log files.
2. Set your Google callback url to https://<url-site-url>/googlecheckout/responsehandler.php
	In Sandbox, SSL is not required.
	In Live mode, SSL is required.
3. Go to https://<url-site-url>/googlecheckout/responsehandler.php
	If you get Fatal error: Call to undefined function: getallheaders() ...
	You must edit /googlecheckout/responsehandler.php, remove /* on line 102 and */ on line 109.
	
TROUBLE SHOOTING
================
1. Problem: Fatal error: Call to undefined function: getallheaders() error.
	Solution: You webhosting company does not have the function getallheaders() enable on your webserver. See above for fix.
2. Problem: /public_html/googlecheckout/response_message.log) [function.fopen]: failed to open stream: Permission denied.
	Solution: Set the file attribute to 777 for /googlecheckout/response_error.log and /googlecheckout/response_message.log files.
3. Problem: Test order shows up in Google but not admin.
	Solution: There is an error somewhere in the file /googlecheckout/responsehandler.php
4. Problem: <error-message>Malformed URL component: expected id: (\d{10})|(\d{15}), but got 8***********4 </error-message>
	Solution: You have an extra space after your Google merchant id. Go to Admin->payment.  Edit Googlecheckout module.  Extra space will disappear. Click update button.
5. Problem: <error-message>No seller found with id 7************8</error-message>
	Solution: Wrong merchant id.  Sandbox merchant id can only be use with sandbox accounts.  Sandbox and Live mode use different merchant id. 
6. Problem: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderE xception: unable to find valid certification path to requested target
	Solution: Your SSL certificate is not accepted by Google Checkout.
7. Problem: <error-message>Bad Signature on Cart</error-message>
	Solution: Incorrect Merchant key.
	

		
KNOWN BUGS - (Report bugs at http://www.zen-cart.com/forum/showthread.php?t=47318)
==========================
Comments in Admin section does not appear in Google Checkout.



CHANGE LOG
==========
09/26/2006 v1.0  (Google Checkout team)
	- Initial release. 
	
09/27/2006 v1.0  (Google Checkout team)
	- Updated the original module to run on either PHP4 or PHP5. 
	
09/28/2006 v1.0a (DrByte)
	- Code separated into components following Zen Cart standards.
	- Zipped for easier implementation.
	- Readme updated. 
		   
10/05/2006 v1.0.1 (Google Checkout team)
	- Step-by-step installation instructions included.   
	
10/14/2006 v1.0.2 (colosports)
	- Fixed languages_id bug.
	- Added return links from Google Checkout Cart.
	- Added customers ip-address & phone number.
	- Added getallheaders() funtion.
	- Fixed zone id bug.
	- Fix address book bug.
	- Added Google link and Order No: to Admin page.
	- Fixed quantity bug.
	- Fixed product attribute bug.
	- Added product attribute in Google Checkout cart. 
	- Updated README file. 

10/14/2006 v1.0.2c (colosports)
	- Fixed change order status on Admin.
	- Change time to reflect time zone on Admin. 
	- Separated full name to first and last name.
	- Updated README file. 	

10/19/2006 v1.0.3 (Google Checkout team)
	- Fixed Notify Customer checkbox bug

11/16/2006 v1.0.4 (colosports)
	- Fixed order status bug.
	- Updated README file and INSTALLATION file. 	
01/12/2007 v1.0.4r (ropu)
   - Fix <tax-table-selector> strict validation.   	
   - Update new sandbox url (must uninstall/install module)